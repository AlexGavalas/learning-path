---
import { ViewTransitions } from 'astro:transitions';
import BaseHead from '~components/base-head.astro';
import PageProgress from '~components/page-progress.astro';
import Nav from '~components/nav.astro';
import Header from '~components/header.astro';
import { DEFAULT_THEME } from '~constants';

interface Props {
    title: string;
}

const { title } = Astro.props;
const themeCookie = Astro.cookies.get('theme');
const theme = themeCookie?.value ?? DEFAULT_THEME;
---

<!doctype html>
<html
    lang="en"
    class={theme === 'light' ? 'light' : 'dark'}
    style={`color-scheme: ${theme};`}
>
    <head>
        <BaseHead title={title} />
        <ViewTransitions />
    </head>
    <PageProgress />
    <body class="bg-light-background dark:bg-dark-background">
        <main
            class="mx-auto max-w-2xl px-4 grid gap-6 selection:bg-light-primary selection:text-light-background dark:selection:bg-dark-primary dark:selection:text-dark-background"
        >
            <Header />
            <Nav
                links={[
                    {
                        href: '/',
                        label: 'Notes',
                    },
                    {
                        href: '/summaries',
                        label: 'Lesson summaries',
                    },
                ]}
            />
            <slot />
        </main>
    </body>
</html>
