---
import type { HTMLAttributes } from 'astro/types';
import { format as formatDate, toDate } from 'date-fns';

interface Props extends HTMLAttributes<'time'> {
    dateString: string;
    label?: string;
    format?: string;
}

const { dateString, format = 'd LLL yyyy', label, ...rest } = Astro.props;

const date = toDate(dateString); // utcToZonedTime(toDate(dateString));
const datetime = formatDate(date, 'yyyy-MM-dd');
const formattedDate = formatDate(date, format);
const ariaLabel = label ? `${label} ${datetime}` : undefined;
---

<time aria-label={ariaLabel} datetime={datetime} {...rest}>{formattedDate}</time
>
